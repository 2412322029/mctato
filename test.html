<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>ctx</title>
</head>
<body>
    <canvas id="canvas"></canvas>
</body>
<script>
    var n = 5  //个数
    var R = 100   //半径
    var pv = 2  //速度倍率
    var linkdistance = 2000  //连线范围
    var blod = 0.05  //粗细倍率
    var color = "#777" //ball颜色
    var Lcolor = "#eeeeee50"  //连线颜色

    //----------------------------------------------

    var canvas = document.getElementById('canvas');
    var ctx = canvas.getContext('2d');
    function myresize() {
        if (canvas.width < window.innerWidth) {
            canvas.width = window.innerWidth * 2;
        }

        if (canvas.height < window.innerHeight) {
            canvas.height = window.innerHeight * 2;
        }
    }
    myresize()
    window.addEventListener("resize", myresize)
    class Line {
        constructor(x1, y1, x2, y2) {
            this.x1 = x1
            this.y1 = y1
            this.x2 = x2
            this.y2 = y2
        }
        draw(Lcolor) {
            ctx.beginPath();
            ctx.moveTo(this.x1, this.y1);
            ctx.lineTo(this.x2, this.y2);
            ctx.strokeStyle = Lcolor;
            ctx.closePath();
            ctx.stroke();
        }
    }

    class Tool {
        static distance(a, b) {
            if (a.x != b.x && a.y != b.y) {
                return Math.sqrt((a.x - b.x) ** 2 + (a.y - b.y) ** 2)
            } else {
                return 0
            }
        }
        static link(c1, c2, w, Lcolor) {
            var x = new Line(c1.x, c1.y, c2.x, c2.y)
            ctx.lineWidth = w;
            x.draw(Lcolor)
        }
    }

    class Ball {
        constructor(x, y, vx, vy, radius, color) {
            this.x = x || 1
            this.y = y || 1
            this.vx = vx || 10
            this.vy = vy || 10
            this.radius = radius || 10
            this.color = color || "black"
        }
        draw() {
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2, true);
            ctx.closePath();
            ctx.fillStyle = this.color;
            ctx.fill();
        }
        move() {
            if (this.y + this.vy > canvas.height - this.radius || this.y + this.vy < this.radius) {
                this.vy = -this.vy;
            }
            if (this.x + this.vx > canvas.width - this.radius || this.x + this.vx < this.radius) {
                this.vx = -this.vx;
            }
            this.draw();
            this.x += this.vx;
            this.y += this.vy;
            // this.vy += .25;

        }
    }
    function clear() { ctx.clearRect(0, 0, canvas.width, canvas.height); }
    arr = []
    function build() {

        for (let i = 0; i < n; i++) {
            var x = R + Math.random() * canvas.width
            var y = R + Math.random() * canvas.height
            var vx = Math.random() * pv
            var vy = Math.random() * pv
            x + R > canvas.width ? x = R : 1 == 1
            y + R > canvas.height ? y = R : 1 == 1
            arr.push(new Ball(x, y, vx, vy, R, color))
        }
    }
    build()
    function animloop() {
        clear()
        for (let i = 0; i < arr.length; i++) {
            arr[i].name = i + 1
            for (let j = 0; j < arr.length; j++) {
                let d = Tool.distance(arr[i], arr[j])
                if (d < linkdistance) {
                    arr[i].move()
                    Tool.link(arr[i], arr[j], (linkdistance - d) * blod, Lcolor)
                }
            }
        }
        window.requestAnimationFrame(animloop);
    };
    animloop()

    window.addEventListener("resize", build)



</script>
<style>
    canvas {
        width: 100%;
        height: 100%;
        z-index: -1;
        top: 0;
        left: 0;
        position: absolute;
        overflow: hidden;
    }

    body,
    html {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
    }
</style>

</html>